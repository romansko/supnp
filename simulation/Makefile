# For manual usage, use "source venv/bin/activate" after venv is set.

ENTITIES := CA CP RA SD UCA

# Fully automate venv installation & artifacts generation using libupnp sample.
.PHONY: sample
sample: venv
	@echo [*] Generating Artifacts from libupnp sample..
	rm -rf $(ENTITIES)
	./venv/bin/python3 ./device_enrollment.py ../upnp/sample/web/tvdevicedesc.xml

# Create python venv with its requirements.
venv:
	@echo [*] Initializing python venv for UCA Simulation..
	python3 -m venv venv
	venv/bin/pip install -r requirements.txt

# Clean venv and artifacts.
.PHONY: clean
clean:
	rm -rf venv __pycache__ $(ENTITIES)
	rm -rf Adversary FakeUCA  # Generated by smiranda

# List Artifacts
.PHONY: tree
tree:
	@tree $(ENTITIES)
